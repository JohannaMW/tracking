{% load staticfiles %}


<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Vehicle Tracker</title>
        <!-- CSS -->
    <script src="{% static "css/reset.css" %}"></script>
    <script src="{% static "css/style.css" %}"></script>
      <!--Bootstrap -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
  </head>
  <body>
  <div class="bs-component">
              <div class="navbar navbar-default">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                  </button>
                  <a class="navbar-brand" href="{% url 'home' %}">Where is my car?</a>
                </div>
                <div class="navbar-collapse collapse navbar-responsive-collapse">

                  <ul class="nav navbar-nav navbar-right">
                      {% if user.is_authenticated %}
                          <li><a href="{% url 'profile' %}">{{ user.username }}</a></li>
                        <li><a href="{% url 'logout' %}">Logout</a></li>
                        {% else %}
                        <li><a href="{% url 'login' %}">Login</a></li>
                        <li><a href="{% url 'register' %}">Register</a></li>
                        {% endif %}

                  </ul>

                </div>
              </div>
            </div>
      <div class="container">
    <div class="row">
            <div class="col-md-12">
                <div id = "map_canvas" style="width: 100%;height: 500px; margin-top: 50px;"></div>
            </div>
        </div>
    <script>

// This example creates a 2-pixel-wide red polyline showing the path of William
// Kingsford Smith's first trans-Pacific flight between Oakland, CA, and
// Brisbane, Australia.

function initMap() {
  var map = new google.maps.Map(document.getElementById('map_canvas'), {
    zoom: 10,
    center: {lat: {{ latest_position_lat }}, lng: {{latest_position_long}} },
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  var routeCoordinates = [
      {% for position in all_positions %}
          { lat: {{ position.0 }}, lng: {{ position.1 }} },
      {% endfor %}
  ];
  var route = new google.maps.Polyline({
    path: routeCoordinates,
    geodesic: true,
    strokeColor: '#FF0000',
    strokeOpacity: 1.0,
    strokeWeight: 2
  });

  route.setMap(map);
}

    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?signed_in=true&callback=initMap"></script>
      </div>
  </body>
</html>